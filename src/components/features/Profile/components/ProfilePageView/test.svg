<svg width="1200" height="630" viewBox="0 0 1200 630"
     xmlns="http://www.w3.org/2000/svg">
  <defs>
    <clipPath id="avatarClip">
      <circle cx="180" cy="330" r="32" />
    </clipPath>
  </defs>

  <!-- background -->
  <rect width="1200" height="630" fill="#f5f6f7" />

  <!-- card -->
  <g transform="translate(150 135)">
    <rect width="900" height="360" rx="16" fill="#ffffff" />
    <rect width="6" height="360" rx="3" fill="#4F46E5" />

    <!-- content -->
    <g transform="translate(26 24)">
      <!-- nickname -->
      <text x="0" y="28"
        font-size="24"
        font-weight="700"
        fill="#111827"
        font-family="system-ui, -apple-system, BlinkMacSystemFont">
        ${escape(nickname)}
      </text>

      <!-- bio -->
      ${
        bio
          ? `<text x="0" y="58"
              font-size="14"
              fill="#4B5563"
              font-family="system-ui"
              style="white-space: pre-wrap;">
              ${escape(truncate(bio, 90))}
            </text>`
          : ""
      }

      <!-- avatar -->
      ${
        photoURL
          ? `<image
              href="${photoURL}"
              x="0"
              y="160"
              width="64"
              height="64"
              clip-path="url(#avatarClip)"
            />`
          : `<circle cx="32" cy="192" r="32" fill="#E5E7EB" />`
      }

      <!-- stats -->
      <g transform="translate(90 170)">
        <text font-size="11" fill="#6B7280" font-weight="600">
          ベストスコア
        </text>
        <text y="20" font-size="16" fill="#111827" font-weight="700">
          ${bestScore.toLocaleString()} CV
        </text>

        <text y="50" font-size="11" fill="#6B7280" font-weight="600">
          順位
        </text>
        <text y="70" font-size="16" fill="#111827" font-weight="700">
          ${escape(rankDisplay)}
        </text>
      </g>
    </g>

    <!-- logo -->
    <text x="780" y="340" font-size="12" fill="#9CA3AF">
      adgame
    </text>
  </g>
</svg>